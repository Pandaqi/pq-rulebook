(()=>{var t=class{constructor(e,t){this.node=e,this.entries=[];const s=this.node.getElementsByClassName("rules-table-entry");for(const e of s){const o=new n(e,t);this.entries.push(o)}}},n=class{constructor(e,t){this.node=e,this.turnFullWidthOnClick=this.node.classList.contains("click-full-width"),this.heading=this.node.getElementsByClassName("heading-container")[0],this.desc=this.node.getElementsByClassName("desc-container")[0],this.icon=this.node.getElementsByClassName("icon-container")[0],this.icon.addEventListener("click",this.toggle.bind(this)),t||this.toggle()}toggle(){this.node.dataset.folded=="true"?(this.node.dataset.folded=!1,this.node.classList.add("rules-table-entry-clicked"),this.turnFullWidthOnClick&&this.node.classList.add("rules-table-entry-clicked-full")):this.node.dataset.folded=="false"&&(this.node.dataset.folded=!0,this.node.classList.remove("rules-table-entry-clicked"),this.turnFullWidthOnClick&&this.node.classList.remove("rules-table-entry-clicked-full"))}},s=t,e=class{constructor(e,t,n){this.node=e,this.hierarchy=t.slice(),this.setZIndexFromHierarchy(t),this.searchChildren(n);const s=this.hierarchy.length<=0;if(s)return;this.setupContent(),this.setupHeader(),this.contentContainer.dataset.folded="false",n?this.setupForPDF():this.toggle()}setZIndexFromHierarchy(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];this.node.style.zIndex=1e3-t}toCounterString(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n]+1);return t.join(".")}getIndentFromHierarchy(e){return e.length+1}setupForPDF(){this.contentContainer.style.transition="initial",this.contentContainer.style.height="auto",this.arrow.style.display="none"}searchChildren(t){let s=this.node.getElementsByClassName("rules-foldable")[0];if(!s)return;const i=Array.from(s.parentElement.childNodes),n=this.hierarchy.slice();this.subsections=[];let o=0;for(const s of i){if(!s.classList)continue;if(!s.classList.contains("rules-foldable"))continue;n.push(o),o++;const a=new e(s,n,t);this.subsections.push(a),n.pop()}}setupContent(){this.contentContainer=this.node.getElementsByClassName("content-container")[0],this.contentHeight=this.contentContainer.offsetHeight,this.contentContainer.style.height="0px"}setupHeader(){const n=this.hierarchy.length==2;let e="top-level";if(n&&(e="mid-level"),this.header=this.node.getElementsByClassName("heading-container")[0],!this.header)return;this.node.classList.add(e),this.header.classList.add(e+"-heading"),this.contentContainer.classList.add(e+"-container"),this.counter=this.header.getElementsByClassName("counter")[0],this.counter.innerHTML=this.toCounterString(this.hierarchy);const s=this.header.getElementsByTagName("h1")[0],o=this.getIndentFromHierarchy(this.hierarchy);var t=document.createElement("h"+o);t.innerHTML=this.header.dataset.value,s.replaceWith(t),this.arrow=this.header.getElementsByClassName("arrow")[0],this.header.addEventListener("click",this.toggle.bind(this))}isFolded(){return this.node.dataset.folded=="true"}unfold(){if(!this.isFolded())return;this.toggle()}fold(){if(this.isFolded())return;this.toggle()}toggle(){const t=this,n=this.isFolded(),e=n?"false":"true",s=n?"&lt;":"&gt;";this.node.dataset.folded=e,this.contentContainer.dataset.folded=e,this.contentContainer.style.height=this.contentHeight+"px",this.arrow.innerHTML=s;const o=e=="true";o?setTimeout(()=>{t.contentContainer.style.height="0px"},3):(this.header.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{t.contentContainer.style.height="auto"},300))}travelHierarchy(e){const t=this.findAllParentSectionNodes(e),n=t.length+1;return n}findAllParentSectionNodes(e){const t=[];for(;e;)e.classList.contains("rules-foldable")&&t.push(e),e=e.parentElement;return t}findParentSection(e){const t=this.findAllParentSectionNodes(e),n=t[0]}findSectionContainingNode(e,t=!1){const n=[];if(!this.subsections)return n;for(const s of this.subsections){if(!s.node.contains(e))continue;n.push(s),t&&n.push(s.findSectionContainingNode(e,t));break}return n.flat()}unfoldEverythingAbove(e){const t=this.findSectionContainingNode(e,!0);for(const e of t)e.unfold()}},o=e,i=class{constructor(e){this.node=e,this.uiNode=e.getElementsByClassName("ui")[0],this.contentNode=e.getElementsByClassName("content")[0],this.id=e.dataset.exampleid,this.cfg=this.getDefaultConfig(),this.originalConfig=PQ_RULEBOOK.exampleConfigs[this.id]||{},Object.assign(this.cfg,this.originalConfig),this.createHTML()}getDefaultConfig(){return{names:["James","Lily","Dennis","Bella","Frank","Lisa"],button:{text:"Give me an example!"}}}reset(){this.contentNode.innerHTML="",this.textArray=[],this.closeButton.style.display="none"}createHTML(){const n=document.createElement("button");this.uiNode.appendChild(n),this.generateButton=n,n.innerHTML=this.cfg.button.text;const e=this;n.addEventListener("click",async()=>{e.reset();const t=e.cfg.generate.bind(e.originalConfig);await t(e),e.print(),e.closeButton.style.display="block"});const t=document.createElement("button");this.uiNode.appendChild(t),this.closeButton=t,t.innerHTML="X",t.classList.add("example-close-button"),t.addEventListener("click",e=>{this.reset()})}text(e){this.textArray.push("<p>"+e+"</p>")}child(e){this.contentNode.appendChild(e)}print(){const e=this.textArray.length>0;if(!e)return;this.contentNode.innerHTML+=this.textArray.join(""),this.textArray=[]}shuffle(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}getNumPlayers(e,t){return Math.floor(Math.random()*(t+1-e))+e}getNames(e){return this.getRandomFromList(this.cfg.names,e)}getRandomFromList(e,t){return this.shuffle(e).slice(0,t)}},a=i;PQ_RULEBOOK={exampleConfigs:{},activate(e){const r=document.getElementsByTagName("main")[0],c=new o(r,[],e),l=document.getElementsByClassName("rules-table"),d=[];for(const t of l){const n=new s(t,e);d.push(n)}const u=document.getElementsByClassName("rules-example"),h=[];for(const e of u){const t=new a(e);h.push(t)}const t=document.getElementsByClassName("image-overlay")[0],n=t.getElementsByTagName("img")[0],m=document.getElementsByTagName("img"),i=15;t.addEventListener("click",()=>{t.style.display="none"});for(const e of m)e.addEventListener("click",()=>{t.style.display="flex",n.style.maxWidth=window.innerWidth-2*i+"px",n.style.maxHeight=window.innerHeight-2*i+"px",n.src=e.src});const f=document.querySelectorAll('a[href^="#"]');for(const e of f)e.addEventListener("click",t=>{t.preventDefault();const s=e.getAttribute("href"),n=document.querySelector(s);return c.unfoldEverythingAbove(n),setTimeout(()=>{n.scrollIntoView({behavior:"smooth",block:"start"})},300),!1})}}})()